<!DOCTYPE HTML>
<html lang="en" manifest="oviyam2.manifest">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- <title>Viewer</title> -->

        <script type="text/javascript" src="js/lib/jquery-latest.js"></script>
        <script type="text/javascript" src="js/lib/jquery-ui-latest.js"></script>
        <script type="text/javascript" src="js/lib/jquery.sleep.js"></script>        
        <script type="text/javascript" src="js/viewer.js"></script>      
        <script type="text/javascript" src="js/lib/smartslider.js"></script>

        <!-- Scout line  -->
        <script type="text/javascript" src="js/Localizer.js"></script>        
        <script type="text/javascript" src="js/SliceLocator.js"></script>
        <script type="text/javascript" src="js/ScoutLineModel.js"></script>
        <script type="text/javascript" src="js/ImageOrientation.js"></script>
        
        <!-- Windowing  -->
        <script type="text/javascript" src="js/lib/BinFileReader.js"></script>
        <script type="text/javascript" src="js/dicom/DicomInputStreamReader.js"></script>
        <script type="text/javascript" src="js/dicom/DicomElement.js"></script>
        <script type="text/javascript" src="js/dicom/DicomParser.js"></script>
        <script type="text/javascript" src="js/dicom/LookupTable.js"></script>
        
        <script type="text/javascript" src="js/framecontent.js"></script>
        <script type="text/javascript" src="js/toolactivator.js"></script>
        <script type="text/javascript" src="js/oviyam.js"></script>
        <script type="text/javascript" src="js/shape.js"></script>
        <script type="text/javascript" src="js/measure.js"></script>

        <script type="text/javascript" src="js/lib/jqcontextmenu.js">

            /***********************************************
             * jQuery Context Menu- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
             * This notice MUST stay intact for legal use
             * Visit Dynamic Drive at http://www.dynamicdrive.com/ for this script and 100s more
             ***********************************************/

        </script>

        <link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
        <link rel="stylesheet" type="text/css" href="css/jqcontextmenu.css" />
        <link rel="stylesheet" type="text/css" href="css/smartslider.css" />
        <link rel="stylesheet" type="text/css" href="css/demos.css" />
        <link rel="stylesheet" type="text/css" href="css/frameContent.css" />
    </head>
    <body>
        <div id="footer" class="demo">
            <div id="trackbar1" >
            </div>
        </div>

        <div id="ImagePane" style="height:100% !important;">
            <div id="patName" class="textOverlay" style="left:5px; top:10px"></div>
            <div id="patID" class="textOverlay" style="left:5px; top:30px"></div>
            <div id="patGender" class="textOverlay" style="left:5px; top:50px"></div>
            <div id="studyDate" class="textOverlay" style="right:7px;top:10px"></div>
            <div id="studyDesc" class="textOverlay" style="right:7px;top:30px"></div>
            <div id="seriesDesc" class="textOverlay" style="right:7px;top:50px"></div>
            <div id="PDFContent" align="center"></div>
            <div id="SRContent"></div>
            <div style="height:100%; margin:auto;" id="canvasDiv">
                <canvas id="imageCanvas"  style="z-index:1; position:absolute; margin:auto;">Your browser doesn't support canvas.</canvas>
                <canvas id="canvasLayer1" style="z-index:2; position:absolute; margin:auto;">Your browser doesn't support canvas.</canvas>
                <canvas id="canvasLayer2" style="z-index:3; position:absolute; margin:auto;">Your browser doesn't support canvas.</canvas>
                <canvas id="previewCanvas" class="preview" style="z-index:4; width: 20%; position:absolute; top: 52px; right: 2px; display: none;"></canvas>
                <canvas id="highlightCanvas" class="preview" style="z-index:5; width: 20%; position:absolute; top: 52px; right: 2px; display: none;"></canvas>
            </div>
            <div id="totalImages" class="textOverlay" style="left:5px; bottom:55px"></div>
            <div id="windowLevel" class="textOverlay" style="left:5px; bottom:35px"></div>
            <div id="huDisplayPanel" class="textOverlay" style="left:5px; bottom:15px"></div>
            <div id="thickLocationPanel" class="textOverlay" style="left:5px; bottom:15px"></div>
            <div id="multiframe" class="textOverlay" style="bottom:75px; right: 7px; background-color:#B76432; visibility:hidden;">Multiframe</div>
            <div id="imageSize" class="textOverlay" style="bottom:55px; right:7px;">Image size: </div>
            <div id="viewSize" class="textOverlay" style="bottom:35px; right:7px;">View size: </div>
            <div id="zoomPercent" class="textOverlay" style="bottom:15px; right:7px;">Zoom: </div>

            <div id="imgOriTop" class="textOverlay" style="left:50%; top:10px"></div>
            <div id="imgOriRight" class="textOverlay" style="top:50%;right:7px"></div>
            <div id="imgOriBottom" class="textOverlay" style="bottom:15px; right:50%"></div>
            <div id="imgOriLeft" class="textOverlay" style="top:50%;left:5px;"></div>

            <div id="frameSrc" style="visibility:hidden"></div>
            <div id="forUIDPanel" style="visibility:hidden"></div>
            <div id="imgPosition" style="visibility:hidden"></div>
            <div id="imgOrientation" style="visibility:hidden"></div>
            <div id="pixelSpacing" style="visibility:hidden"></div>
            <div id="imgType" style="visibility:hidden"></div>
            <div id="refSOPInsUID" style="visibility:hidden"></div>
            <div id="modalityDiv" style="visibility:hidden"></div>            
            <div id="applyWLDiv" class="textOverlay" style="bottom:100px; right:7px; cursor:pointer; display:none" divState="false" onclick="applyWL();">Apply All</div>
            <div id="tool" style="display:none;"></div>           
            <div id="serId" style="display:none;"></div> 
        </div>

        <script type="text/javascript">        	
            function loadContextMenu() {
            	var queryString = window.location.href;
            	var seriesData = JSON.parse(sessionStorage[parent.pat.studyUID]);            	
            	var cxtContent = '<ul id="contextmenu1" class="jqcontextmenu" style="z-index: 10">';
            	if(isCompatible()) {
            		for(var i=0;i<seriesData.length;i++) {
            			var series = seriesData[i];
            			var seriesDesc = convertSplChars(series['seriesDesc']);            			
            			if(seriesDesc== undefined || seriesDesc==='') {
            				seriesDesc = 'UNKNOWN';
            			}
						cxtContent+= '<li><a href="frameContent.html?series=' + series['seriesUID'] + '&seriesDesc=' + series['seriesDesc'] + '&images=' + series['totalInstances'] + '&modality='+ series['modality'] + '">' + seriesDesc + '</a></li>';						
            		}   
            		cxtContent+='</ul>';         		
            	} else {
            		for(var i=0;i<seriesData.length;i++) {
	            		var series = seriesData[i];
	            		var seriesDesc = convertSplChars(series['seriesDesc']);
            			if(seriesDesc==undefined || seriesDesc==='') {
            				seriesDesc = 'UNKNOWN';
            			}
            			cxtContent +='<li><a href="frameContent.html?serverURL=';
            			cxtContent += getParameter(queryString, 'serverURL');
            			cxtContent += '&studyUID=' + parent.pat.studyUID;
            			cxtContent += '&series=' + series['seriesUID'];
            			cxtContent += '&seriesDesc=' + series['seriesDesc'];
            			cxtContent += '&images=' + series['totalInstances'];
            			cxtContent += '&modality=' + series['modality'] + '">' + seriesDesc + '</a></li>';
            		}
            		cxtContent+='</ul>';
            	}
                var div = document.createElement("div");
                div.innerHTML = cxtContent;
                document.body.appendChild(div);

                jQuery('canvas').addcontextmenu('contextmenu1');
            }
        </script>

    </body>
</html>